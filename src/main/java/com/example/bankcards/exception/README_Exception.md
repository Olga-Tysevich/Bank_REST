# Обработка исключений

**Модуль для обработки исключений в приложении**

---

### Основные функции

1. **Хранение информации об исключительных ситуациях в приложении и их последующая обработка**

---

### Ключевые компоненты

| Компонент           | Назначение                                             |
| ------------------- | ------------------------------------------------------ |
| **`классы ошибок`** | Различные классы, описывающие исключительные ситуации. |
| **`handlers`**      | Пакет, содержащий обработчики исключений приложения.   |

---

### Описание пакета `handlers`

Пакет `handlers` предоставляет централизованное решение для обработки исключений, возникших в приложении. Он состоит из нескольких классов, каждый из которых отвечает за определенный аспект обработки ошибок:

#### 1. **`ErrorDetail`**

Класс, который содержит информацию о конкретной ошибке, включая имя поля и описание проблемы.

#### 2. **`ExceptionResponse`**

Класс, который формирует ответ API при возникновении исключения. Он включает в себя HTTP-статус, сообщение об ошибке, детали исключения и временную метку.

#### 3. **`ExceptionsHandler`**

Основной класс-обработчик, который перехватывает различные исключения, возникающие во время обработки HTTP-запросов, и возвращает структурированные ответы. Этот класс обрабатывает ошибки различных типов, включая:

* Проблемы с доступом (`AccessDeniedException`, `ProhibitedException`)
* Ошибки при обработке запроса (`HttpMediaTypeException`, `HttpMessageNotReadableException`)
* Не найденные ресурсы (`EntityNotFoundException`, `UsernameNotFoundException`)
* Проблемы с транзакциями (`DataIntegrityViolationException`, `TransactionSystemException`)
* Ошибки аутентификации и авторизации (`InvalidRefreshTokenException`, `AuthenticationCredentialsNotFoundException`)

Каждый обработчик возвращает ответ с соответствующим HTTP-статусом и подробной информацией о проблеме.

#### 4. **`ValidationErrorResponse`**

Класс, который описывает ошибки валидации данных, получаемых от клиента. Он включает в себя список ошибок, описанных в виде объектов `ErrorDetail`.

---

### Типы исключений, которые обрабатываются

* **Авторизация и доступ**: Ошибки, связанные с доступом, такие как `AccessDeniedException` или `ProhibitedException`.
* **Неверный формат запроса**: Ошибки, возникающие при обработке некорректных данных в запросе, например `HttpMediaTypeException` или `HttpMessageNotReadableException`.
* **Не найдено**: Ошибки, связанные с отсутствием запрашиваемых ресурсов, например `EntityNotFoundException`.
* **Конфликты данных**: Ошибки целостности данных, например `DataIntegrityViolationException`.
* **Неавторизованные действия**: Ошибки, связанные с неправильными токенами или отсутствием прав, такие как `InvalidRefreshTokenException`.
* **Ошибки бд**: Ошибки связанные с БД, например `TransactionSystemException`.

---


### Заключение

Модуль обработки исключений предназначен для централизованной и стандартизированной обработки различных ошибок в приложении, предоставляя пользователю ясные и структурированные сообщения об ошибках. Это помогает упростить отладку и повысить качество взаимодействия с API.
